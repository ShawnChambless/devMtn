angular.module("groupProject",["ui.router"]).constant("url",{url:"http://192.241.216.79"}).config(["$stateProvider","$urlRouterProvider",function(t,e){var r=function(t,e){return t.getSessionUser().then(function(r){return t.currentUser()||e.go("login"),r})};e.otherwise("/"),t.state("login",{url:"/login",templateUrl:"app/Login/LoginTmpl.html",controller:"LoginCtrl",resolve:{sessionLogin:function(t,e){t.getSessionUser().then(function(r){return t.currentUser()&&e.go("home"),r})}}}).state("home",{url:"/?count",templateUrl:"app/home/homeTmpl.html",controller:"homeCtrl",params:{count:{value:"0",squash:!0}},resolve:{currentUser:function(t){return t.getSessionUser().then(function(t){return t})},getPosts:function(t,e,r){return t.getPosts(e.count).then(function(n){return 0===n.data.length?r.go("home",{count:t.lastCount()}):t.setCount(e.count),n},function(t){console.log(t)})}}}).state("cat",{url:"/cat/:cat",templateUrl:"app/home/homeTmpl.html",controller:"contentCategoriesCtrl",resolve:{currentUser:function(t){return t.getSessionUser().then(function(t){return t})},getCategoryPosts:function(t,e){return t.getCategoryPosts(e.cat).then(function(t){return t})}}}).state("tag",{url:"/cat/:cat/:tag",templateUrl:"app/home/homeTmpl.html",controller:"contentTagsCtrl",resolve:{currentUser:function(t){return t.getSessionUser().then(function(t){return t})},getCategoryPostsByTag:function(t,e){return t.getCategoryPostsByTag(e.cat,e.tag).then(function(t){return t})}}}).state("profile",{url:"/profile",templateUrl:"app/userProfile/userProfileTmpl.html",controller:"userProfileCtrl",resolve:{currentUser:r,getUser:function(t,e,r){return t.getSessionUser().then(function(){return t.currentUser()?e.getUser(t.currentUser()._id).then(function(t){return e.user=t.data,t.data}):void r.go("login")})}}}).state("admin",{url:"/admin",templateUrl:"app/admin/adminTmpl.html",controller:"adminCtrl",resolve:{currentUser:function(t,e){t.getSessionUser().then(function(){var r=t.currentUser();r?r.isAdmin||e.go("home"):e.go("login")})},getPosts:function(t){return t.getPosts().then(function(t){return t})}}}).state("bounty",{url:"/bounties",templateUrl:"app/bounty/bountyTmpl.html",controller:"bountyCtrl",resolve:{currentUser:r,bounties:function(t){return t.getBounties().then(function(t){return t})}}}).state("bountyId",{url:"/bounties/:_id",templateUrl:"app/bounty/bountyIdTmpl.html",controller:"bountyIdCtrl",resolve:{currentUser:r,getBountyId:function(t,e){return t.getBountyId(e._id).then(function(t){return t})}}}).state("users",{url:"/users",templateUrl:"app/users/userTmpl.html",controller:"userCtrl",resolve:{currentUser:r,getUsers:function(t){return t.getUsers().then(function(t){return t.data})}}})}]).directive("ngEnter",function(t){return function(t,e,r){e.bind("keydown keypress",function(e){13===e.which&&(t.$apply(function(){t.$eval(r.ngEnter)}),e.preventDefault())})}});